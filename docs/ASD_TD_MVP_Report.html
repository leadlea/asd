<!DOCTYPE html>
<html lang="ja"><meta charset="utf-8">
<title>ASD vs TD — 語用論MVPまとめ（docs版）</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Hiragino Kaku Gothic ProN',Meiryo,sans-serif;line-height:1.7;margin:0;background:#fff;color:#111}
.wrap{max-width:1100px;margin:0 auto;padding:24px}
h1{font-size:28px;margin:0 0 12px}
h2{margin-top:28px;border-left:4px solid #0b63ce;padding-left:10px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.card{background:#f7f7f9;border:1px solid #e6e6ef;border-radius:12px;padding:12px}
.muted{color:#555}
img{max-width:100%;border-radius:8px;border:1px solid #e6e6ef}
table{border-collapse:collapse;width:100%}
th,td{border:1px solid #e6e6ef;padding:6px 8px;text-align:right}
th:first-child,td:first-child{text-align:left}
footer{margin-top:28px;color:#777;font-size:12px}
</style>
<body><div class="wrap">
<h1>ASD vs TD — 語用論MVPまとめ（docs版）</h1>

<div style="max-width:900px;margin:12px auto;padding:12px;border:1px solid #e6e6ef;border-radius:12px">
  <div style="font-weight:600;margin-bottom:6px">LoCO (paired, calibrated) — 平均指標</div>
  <table class="dataframe" style="width:100%">
    <tr><th style="text-align:left">設定</th><th>AUC_adj (mean)</th><th>F1_cal (mean)</th></tr>
    <tr><td>+ Reference + Meta</td><td>0.801</td><td>0.414</td></tr>
    <tr><td>+ Reference</td><td>0.639</td><td>0.336</td></tr>
    <tr><td>Base</td><td>0.633</td><td>0.281</td></tr>
  </table>
  <div style="font-size:12px;color:#666;margin-top:6px">注: 各foldの単純平均。閾値は学習側CVでF1最大を採用。</div>
</div>

<p class="muted">このHTMLは <code>docs/</code> 内の CSV と PNG を直接読み込んで再生成しています。</p>

<h2>データ & QC</h2>
<div class="grid">
  <div class="card">
    <b>採用セッション数</b>
    <ul>
      <li>ASD: 71</li>
      <li>TD: 386</li>
    </ul>
    <b>QC閾値（参考）</b>
    <ul>
      <li>ASD: n_total [209–1312], chi_ratio [0.255–0.455]</li>
      <li>TD:  n_total [318–1582], chi_ratio [0.319–0.671]</li>
    </ul>
  </div>
  <div class="card">
    <b>中央値（QC後）</b>
    <table>
      <tr><th></th><th>ASD</th><th>TD</th></tr>
      <tr><td>CHI比</td><td>0.345</td><td>0.453</td></tr>
      <tr><td>MLU (Child)</td><td>2.279</td><td>3.053</td></tr>
      <tr><td>MLU (Adult)</td><td>3.825</td><td>4.765</td></tr>
    </table>
  </div>
</div>

<h2>比較図（docs/ の fig_box_*.png を自動埋め込み）</h2>
<div class="grid">
  <div class="card"><div class="muted">disf_per_1k</div><img src="fig_box_disf_per_1k.png" alt="disf_per_1k"></div>
<div class="card"><div class="muted">dm_per_utt</div><img src="fig_box_dm_per_utt.png" alt="dm_per_utt"></div>

</div>

<h2>語用論MVP — 上位3指標（|Cohen's d|順）</h2>
<table>
  <tr><th>metric</th><th>ASD_mean</th><th>TD_mean</th><th>ASD_median</th><th>TD_median</th><th>Cohen d</th><th>Cliff δ</th><th>ASD_n</th><th>TD_n</th></tr>
<tr><td>disf_per_utt</td><td>0.122</td><td>0.183</td><td>0.093</td><td>0.154</td><td>-0.456</td><td>-0.243</td><td>71</td><td>386</td></tr>
<tr><td>disf_per_1k</td><td>104.984</td><td>67.256</td><td>41.260</td><td>50.200</td><td>0.427</td><td>-0.028</td><td>71</td><td>386</td></tr>
<tr><td>dm_per_utt</td><td>0.018</td><td>0.028</td><td>0.010</td><td>0.022</td><td>-0.393</td><td>-0.298</td><td>71</td><td>386</td></tr>
</table>
<h2>Feature Ablation (5-fold CV, thr=0.55)</h2>
<p>Base: AUC=0.909, F1=0.575</p>
<table class="dataframe" style="width:100%">
  <thead>
    <tr style="text-align: right;">
      <th>feature</th>
      <th>auc_drop</th>
      <th>f1_drop</th>
      <th>auc</th>
      <th>f1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>disf_per_utt</td>
      <td>0.041524</td>
      <td>0.034034</td>
      <td>0.867046</td>
      <td>0.541043</td>
    </tr>
    <tr>
      <td>dm_per_utt</td>
      <td>0.028340</td>
      <td>0.048104</td>
      <td>0.880230</td>
      <td>0.526972</td>
    </tr>
    <tr>
      <td>dm_per_1k</td>
      <td>0.021233</td>
      <td>0.040845</td>
      <td>0.887338</td>
      <td>0.534231</td>
    </tr>
    <tr>
      <td>disf_per_1k</td>
      <td>0.013470</td>
      <td>-0.013302</td>
      <td>0.895100</td>
      <td>0.588378</td>
    </tr>
    <tr>
      <td>U</td>
      <td>0.004658</td>
      <td>0.003905</td>
      <td>0.903913</td>
      <td>0.571171</td>
    </tr>
    <tr>
      <td>pron3_per_1k</td>
      <td>0.001994</td>
      <td>0.011413</td>
      <td>0.906576</td>
      <td>0.563663</td>
    </tr>
    <tr>
      <td>T</td>
      <td>0.000333</td>
      <td>-0.025866</td>
      <td>0.908238</td>
      <td>0.600943</td>
    </tr>
    <tr>
      <td>pron1_per_1k</td>
      <td>0.000181</td>
      <td>-0.017091</td>
      <td>0.908390</td>
      <td>0.592168</td>
    </tr>
    <tr>
      <td>msv_per_1k</td>
      <td>-0.001103</td>
      <td>0.007282</td>
      <td>0.909674</td>
      <td>0.567795</td>
    </tr>
    <tr>
      <td>pron2_per_1k</td>
      <td>-0.002060</td>
      <td>0.004892</td>
      <td>0.910631</td>
      <td>0.570185</td>
    </tr>
  </tbody>
</table>
<p><img src="ablation_delta.png" style="max-width:100%"></p>


<h2>LoCO (paired, calibrated) — Comparison</h2>
<p style="max-width:900px;margin:4px auto 12px;color:#666">
  概況: Rollins/Sachs を含むfoldで安定して高性能。Providenceを含むfoldは相対的に難度高。
</p>
<div class="tablewrap"><h3>+ Reference + Meta (MLU/CHI)</h3><table class="dataframe" style="width:100%">
  <thead>
    <tr style="text-align: right;">
      <th>fold</th>
      <th>AUC_adj</th>
      <th>F1_cal</th>
      <th>thr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Flusberg+Brown</td>
      <td>0.901</td>
      <td>0.515</td>
      <td>0.704</td>
    </tr>
    <tr>
      <td>Flusberg+Providence</td>
      <td>0.549</td>
      <td>0.294</td>
      <td>0.547</td>
    </tr>
    <tr>
      <td>Flusberg+Sachs</td>
      <td>0.914</td>
      <td>0.483</td>
      <td>0.767</td>
    </tr>
    <tr>
      <td>Nadig+Brown</td>
      <td>0.772</td>
      <td>0.350</td>
      <td>0.657</td>
    </tr>
    <tr>
      <td>Nadig+Providence</td>
      <td>0.779</td>
      <td>0.205</td>
      <td>0.562</td>
    </tr>
    <tr>
      <td>Nadig+Sachs</td>
      <td>0.798</td>
      <td>0.455</td>
      <td>0.770</td>
    </tr>
    <tr>
      <td>Rollins+Brown</td>
      <td>0.948</td>
      <td>0.556</td>
      <td>0.635</td>
    </tr>
    <tr>
      <td>Rollins+Providence</td>
      <td>0.592</td>
      <td>0.128</td>
      <td>0.553</td>
    </tr>
    <tr>
      <td>Rollins+Sachs</td>
      <td>0.952</td>
      <td>0.737</td>
      <td>0.644</td>
    </tr>
  </tbody>
</table></div>
<div class="tablewrap"><h3>+ Reference</h3><table class="dataframe" style="width:100%">
  <thead>
    <tr style="text-align: right;">
      <th>fold</th>
      <th>AUC_adj</th>
      <th>F1_cal</th>
      <th>thr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Flusberg+Brown</td>
      <td>0.633</td>
      <td>0.419</td>
      <td>0.602</td>
    </tr>
    <tr>
      <td>Flusberg+Providence</td>
      <td>0.538</td>
      <td>0.276</td>
      <td>0.558</td>
    </tr>
    <tr>
      <td>Flusberg+Sachs</td>
      <td>0.662</td>
      <td>0.484</td>
      <td>0.709</td>
    </tr>
    <tr>
      <td>Nadig+Brown</td>
      <td>0.526</td>
      <td>0.323</td>
      <td>0.659</td>
    </tr>
    <tr>
      <td>Nadig+Providence</td>
      <td>0.662</td>
      <td>0.116</td>
      <td>0.536</td>
    </tr>
    <tr>
      <td>Nadig+Sachs</td>
      <td>0.617</td>
      <td>0.556</td>
      <td>0.694</td>
    </tr>
    <tr>
      <td>Rollins+Brown</td>
      <td>0.921</td>
      <td>0.262</td>
      <td>0.568</td>
    </tr>
    <tr>
      <td>Rollins+Providence</td>
      <td>0.571</td>
      <td>0.088</td>
      <td>0.593</td>
    </tr>
    <tr>
      <td>Rollins+Sachs</td>
      <td>0.624</td>
      <td>0.500</td>
      <td>0.652</td>
    </tr>
  </tbody>
</table></div>
<div class="tablewrap"><h3>Base</h3><table class="dataframe" style="width:100%">
  <thead>
    <tr style="text-align: right;">
      <th>fold</th>
      <th>AUC_adj</th>
      <th>F1_cal</th>
      <th>thr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Flusberg+Brown</td>
      <td>0.558</td>
      <td>0.315</td>
      <td>0.595</td>
    </tr>
    <tr>
      <td>Flusberg+Providence</td>
      <td>0.702</td>
      <td>0.381</td>
      <td>0.699</td>
    </tr>
    <tr>
      <td>Flusberg+Sachs</td>
      <td>0.573</td>
      <td>0.222</td>
      <td>0.649</td>
    </tr>
    <tr>
      <td>Nadig+Brown</td>
      <td>0.568</td>
      <td>0.218</td>
      <td>0.633</td>
    </tr>
    <tr>
      <td>Nadig+Providence</td>
      <td>0.571</td>
      <td>0.119</td>
      <td>0.530</td>
    </tr>
    <tr>
      <td>Nadig+Sachs</td>
      <td>0.629</td>
      <td>0.541</td>
      <td>0.652</td>
    </tr>
    <tr>
      <td>Rollins+Brown</td>
      <td>0.781</td>
      <td>0.155</td>
      <td>0.547</td>
    </tr>
    <tr>
      <td>Rollins+Providence</td>
      <td>0.596</td>
      <td>0.091</td>
      <td>0.506</td>
    </tr>
    <tr>
      <td>Rollins+Sachs</td>
      <td>0.721</td>
      <td>0.483</td>
      <td>0.656</td>
    </tr>
  </tbody>
</table></div>


<h2>Reviewer addendum — 指標マップ & Providence 診断</h2>
<p>先生レビュー対応の補足資料（1枚）：<a href="TECH_MEMO_PrAAG.html">TECH_MEMO_PrAAG.html</a></p>
<p style="color:#666;font-size:12px;margin-top:-8px">図は Providence vs Others の平均比較（MLU/CHI）。詳細はメモ内。</p>
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;max-width:900px;margin:0 auto">
  <img src="prov_vs_others_mlu_child.png" style="width:100%">
  <img src="prov_vs_others_mlu_adult.png" style="width:100%">
  <img src="prov_vs_others_chi_ratio.png" style="width:100%">
</div>

<h2>Limitations / 注意点</h2>
<ul style="max-width:900px;margin:0 auto">
  <li>コーパス間の分布差（話題・収録条件）により、foldごとの難易度差が残存（特に Providence 関連）。</li>
  <li>決定閾値は学習側CVで最適化（F1最大）。実運用では校正データ/等費用比での再設定が必要。</li>
  <li>参照表現はルール近似（固有名詞=先頭大文字語）。固有表記/語尾変化の検出強化で精度改善の余地あり。</li>
</ul>
</body></html>